(this["webpackJsonpnft-game-starter"]=this["webpackJsonpnft-game-starter"]||[]).push([[0],{11:function(e,t){e.exports={CONTRACT_ADDRESS:"0x113908D92928D200F19268B61887aB9960ffAD13",ABI:[{inputs:[{internalType:"string[]",name:"characterNames",type:"string[]"},{internalType:"string[]",name:"characterImageURIs",type:"string[]"},{internalType:"uint256[]",name:"characterHp",type:"uint256[]"},{internalType:"uint256[]",name:"characterAttackDamage",type:"uint256[]"},{internalType:"string",name:"bossName",type:"string"},{internalType:"string",name:"bossImageURI",type:"string"},{internalType:"uint256",name:"bossHP",type:"uint256"},{internalType:"uint256",name:"bossAttackDamage",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"newBossHP",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newPlayerHP",type:"uint256"}],name:"AttackComplete",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"characterIndex",type:"uint256"}],name:"CharacterNFTMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"attackBoss",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"bigBoss",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"imageURI",type:"string"},{internalType:"uint256",name:"HP",type:"uint256"},{internalType:"uint256",name:"maxHP",type:"uint256"},{internalType:"uint256",name:"attackDamage",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"checkIfUserHasNFT",outputs:[{components:[{internalType:"uint256",name:"characterIndex",type:"uint256"},{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"HP",type:"uint256"},{internalType:"uint256",name:"attackDamage",type:"uint256"},{internalType:"uint256",name:"maxHP",type:"uint256"},{internalType:"string",name:"imageURI",type:"string"},{internalType:"uint256",name:"lastUpdate",type:"uint256"}],internalType:"struct Mygame.attributes",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllDefaultCharacters",outputs:[{components:[{internalType:"uint256",name:"characterIndex",type:"uint256"},{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"HP",type:"uint256"},{internalType:"uint256",name:"attackDamage",type:"uint256"},{internalType:"uint256",name:"maxHP",type:"uint256"},{internalType:"string",name:"imageURI",type:"string"},{internalType:"uint256",name:"lastUpdate",type:"uint256"}],internalType:"struct Mygame.attributes[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBigBoss",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"imageURI",type:"string"},{internalType:"uint256",name:"HP",type:"uint256"},{internalType:"uint256",name:"maxHP",type:"uint256"},{internalType:"uint256",name:"attackDamage",type:"uint256"}],internalType:"struct Mygame.BigBoss",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_characterIndex",type:"uint256"}],name:"mintCharacterNFT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"nftHolderAttributes",outputs:[{internalType:"uint256",name:"characterIndex",type:"uint256"},{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"HP",type:"uint256"},{internalType:"uint256",name:"attackDamage",type:"uint256"},{internalType:"uint256",name:"maxHP",type:"uint256"},{internalType:"string",name:"imageURI",type:"string"},{internalType:"uint256",name:"lastUpdate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nftHolders",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"replenishHealth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],transformCharacterData:function(e){return{name:e.name,imageURI:e.imageURI,HP:e.HP.toNumber(),maxHP:e.maxHP.toNumber(),attackDamage:e.attackDamage.toNumber()}}}},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},52:function(e,t){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),i=n(36),s=n.n(i),c=(n(46),n(2)),o=n(13),u=n(12),p=n(17),l=(n(47),n(48),n(11)),m=(n(49),n(5)),d=function(){return Object(m.jsxs)("div",{className:"lds-ring",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]})},y=function(e){var t=e.setCharacterNFT,n=Object(a.useState)([]),r=Object(u.a)(n,2),i=r[0],s=r[1],y=Object(a.useState)(null),b=Object(u.a)(y,2),j=b[0],f=b[1],h=Object(a.useState)(!1),g=Object(u.a)(h,2),x=g[0],O=g[1],T=function(){var e=Object(o.a)(Object(c.a)().mark((function e(t){var n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!j){e.next=12;break}return O(!0),console.log("Minting in progress!!"),e.next=6,j.mintCharacterNFT(t);case 6:return n=e.sent,e.next=9,n.wait();case 9:console.log("mintTxn: "+n),alert("Minted NFT!"),O(!1);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),O(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=window.ethereum;if(e){var t=new p.a.providers.Web3Provider(e).getSigner(),n=new p.a.Contract(l.CONTRACT_ADDRESS,l.ABI,t);f(n)}else console.log("Ethereum object not found!")}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(o.a)(Object(c.a)().mark((function e(){var t,n;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Getting characters to mint!"),e.next=4,j.getAllDefaultCharacters();case 4:t=e.sent,console.log("charactersTxn:",t),n=t.map((function(e){return Object(l.transformCharacterData)(e)})),s(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(o.a)(Object(c.a)().mark((function e(n,a,r){var i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("CharacterNFT minted - sender: ".concat(n," tokenId: ").concat(a.toNumber()," characterIndex: ").concat(r.toNumber())),!j){e.next=7;break}return e.next=4,j.checkIfUserHasNFT();case 4:i=e.sent,console.log("CharacterNFT: ",i),t(Object(l.transformCharacterData)(i));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return j&&(e(),j.on("CharacterNFTMinted",n)),function(){j&&j.off("CharacterNFTMinted",n)}}),[j]);return Object(m.jsxs)("div",{className:"select-character-container",children:[Object(m.jsx)("h2",{children:"Mint Your Hero. Choose wisely."}),i.length>0&&Object(m.jsx)("div",{className:"character-grid",children:(console.log("renderCharacters called!"),i.map((function(e,t){return Object(m.jsxs)("div",{className:"character-item",children:[Object(m.jsx)("div",{className:"name-container",children:Object(m.jsx)("p",{children:e.name})}),Object(m.jsx)("img",{alt:e.name,src:e.imageURI}),Object(m.jsx)("button",{className:"character-mint-button",type:"button",onClick:function(){return T(t)},children:"Mint ".concat(e.name)})]},e.name)})))}),x&&Object(m.jsxs)("div",{className:"loading",children:[Object(m.jsxs)("div",{className:"indicator",children:[Object(m.jsx)(d,{}),Object(m.jsx)("p",{children:"Minting in progress..."})]}),Object(m.jsx)("img",{src:"https://media2.giphy.com/media/61tYloUgq1eOk/giphy.gif?cid=ecf05e47dg95zbpabxhmhaksvoy8h526f96k4em0ndvx078s&rid=giphy.gif&ct=g",alt:"Minting Loading Screen"})]})]})},b=n(18),j=(n(63),function(e){var t=e.characterNFT,n=e.setCharacterNFT,r=e.currentAccount,i=Object(a.useState)(null),s=Object(u.a)(i,2),j=s[0],f=s[1],h=Object(a.useState)(!1),g=Object(u.a)(h,2),x=g[0],O=g[1],T=Object(a.useState)(null),v=Object(u.a)(T,2),k=v[0],w=v[1],N=Object(a.useState)(""),C=Object(u.a)(N,2),A=C[0],H=C[1],P=function(){var e=Object(o.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!j){e.next=13;break}return H("attacking"),console.log("Attacking Boss!"),e.next=6,j.attackBoss();case 6:return t=e.sent,e.next=9,t.wait();case 9:console.log("attacktxn: ",t),H("hit"),O(!0),setTimeout((function(){O(!1)}),5e3);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),H("");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=window.ethereum;if(e){var t=new p.a.providers.Web3Provider(e).getSigner(),n=new p.a.Contract(l.CONTRACT_ADDRESS,l.ABI,t);f(n)}else console.log("Ethereum Object not Found")}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(o.a)(Object(c.a)().mark((function e(){var t;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getBigBoss();case 2:t=e.sent,console.log("Boss: ",t),w(Object(l.transformCharacterData)(t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(e,t,a){var i=t.toNumber(),s=a.toNumber(),c=e.toString();console.log("Attack Complete: Boss HP: ".concat(i," Player HP: ").concat(s," ")),r===c.toLowerCase()?(w((function(e){return Object(b.a)(Object(b.a)({},e),{},{HP:i})})),n((function(e){return Object(b.a)(Object(b.a)({},e),{},{HP:s})}))):w((function(e){return Object(b.a)(Object(b.a)({},e),{},{HP:i})}))};return j&&(e(),j.on("AttackComplete",t)),function(){j&&j.off("Attack Complete",t)}}),[j]),Object(m.jsxs)("div",{className:"arena-container",children:[k&&t&&Object(m.jsx)("div",{id:"toast",className:x?"show":"",children:Object(m.jsx)("div",{id:"desc",children:"".concat(k.name," was hit for ").concat(t.attackDamage,"!")})}),k&&0===t.HP&&Object(m.jsx)(y,{setCharacterNFT:n}),k&&t.HP&&Object(m.jsxs)("div",{className:"boss-container",children:[Object(m.jsxs)("div",{className:"boss-container",children:[Object(m.jsx)("h2",{children:k.name}),Object(m.jsxs)("div",{className:"image-content",children:[Object(m.jsx)("img",{src:k.imageURI,alt:"Boss ".concat(k.name)}),Object(m.jsxs)("div",{className:"health-bar",children:[Object(m.jsx)("progress",{value:k.HP,max:k.maxHP}),Object(m.jsx)("p",{children:"".concat(k.HP," / ").concat(k.maxHP," HP")})]})]})]}),Object(m.jsx)("div",{className:"attack-container",children:Object(m.jsx)("button",{className:"cta-button",onClick:P,children:"Attack ".concat(k.name)})}),"attacking"===A&&Object(m.jsxs)("div",{className:"loading-indicator",children:[Object(m.jsx)(d,{}),Object(m.jsx)("p",{children:"Attacking....."})]})]}),t.HP&&Object(m.jsx)("div",{className:"player-container",children:Object(m.jsxs)("div",{className:"player-container",children:[Object(m.jsx)("h2",{children:"Your Character"}),Object(m.jsxs)("div",{className:"player",children:[Object(m.jsxs)("div",{className:"image-content",children:[Object(m.jsx)("h2",{children:t.name}),Object(m.jsx)("img",{src:t.imageURI,alt:"Character ".concat(t.name)}),Object(m.jsxs)("div",{className:"health-bar",children:[Object(m.jsx)("progress",{value:t.HP,max:t.maxHP}),Object(m.jsx)("p",{children:"".concat(t.HP," / ").concat(t.maxHP," HP")})]})]}),Object(m.jsx)("div",{className:"stats",children:Object(m.jsx)("h4",{children:"Attack Damage:".concat(t.attackDamage)})})]})]})})]})}),f=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(null),s=Object(u.a)(i,2),b=s[0],f=s[1],h=Object(a.useState)(!1),g=Object(u.a)(h,2),x=g[0],O=g[1],T=function(){var e=Object(o.a)(Object(c.a)().mark((function e(){var t,n,a,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(),e.prev=1,t=window,n=t.ethereum){e.next=9;break}return console.log("Metamask not present!"),O(!1),e.abrupt("return");case 9:return console.log("We have the object",n),e.next=12,n.request({method:"eth_accounts"});case 12:0!==(a=e.sent).length?(i=a[0],console.log("Authorized Account found!",i),r(i)):console.log("Authorized account not found!");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:O(!1);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(Object(c.a)().mark((function e(){var t,n,a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum){e.next=6;break}return console.log("Not connected!"),alert("Please connect to metamask"),e.abrupt("return");case 6:return e.next=8,n.request({method:"eth_requestAccounts"});case 8:a=e.sent,console.log("Connected",a[0]),r(a[0]),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("type of network version is: ",typeof window.ethereum.networkVersion),"11155111"!==window.ethereum.networkVersion&&alert("Please connect to sepolia!")}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){O(!0),k(),T()}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(o.a)(Object(c.a)().mark((function e(){var t,a,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Checking for Character NFT on address:",n),t=new p.a.providers.Web3Provider(window.ethereum),a=t.getSigner(),r=new p.a.Contract(l.CONTRACT_ADDRESS,l.ABI,a),e.next=6,r.checkIfUserHasNFT();case 6:(i=e.sent).name&&(console.log("Congratulations you already have a NFT!"),f(Object(l.transformCharacterData)(i))),O(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&(console.log("CurrentAccount: "+n),e())}),[n]),Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"header-container",children:[Object(m.jsx)("p",{className:"header gradient-text",children:"\u2694\ufe0f Metaverse Slayer \u2694\ufe0f"}),Object(m.jsx)("p",{className:"sub-text",children:"Team up to protect the Metaverse!"}),x?Object(m.jsx)(d,{}):n?n&&!b?Object(m.jsx)(y,{setCharacterNFT:f}):n&&b?Object(m.jsx)(j,{characterNFT:b,currentAccount:n,setCharacterNFT:f}):void 0:Object(m.jsxs)("div",{className:"connect-wallet-container",children:[Object(m.jsx)("img",{src:"https://media.tenor.com/qcVUCfxHJFUAAAAC/vader.gif",alt:"Vader gif"}),Object(m.jsx)("button",{className:"cta-button connect-wallet-button",onClick:v,children:" Please connect your wallet!!"})]})]}),Object(m.jsx)("div",{className:"footer-container"})]})})};s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(f,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.652257a9.chunk.js.map